{"version":3,"file":"colorSlider.js","sources":["../template.js","../colorSlider.ts"],"sourcesContent":["/**\n * @param {{ [key: string]: any }} opts\n * @returns {string}\n */\n function getCss(opts = {}) {\n  return `:host {\n  display: inline-block;\n  transform: rotate(${opts.rotation}deg);\n  margin-top: ${opts.marginTop};\n}\nsvg circle {\n  cursor: pointer;\n}`\n}\n\n/**\n * @param {{ [key: string]: any }} opts\n * @returns {string}\n */\n function getHtml(opts = {}) {\n  return `<svg width=\"${opts.width}\" height=\"${opts.height}\">\n  <defs>\n    <linearGradient id=\"pickerHue\">\n      <stop offset=\"0\" stop-color=\"#fff\" stop-opacity=\"1\" />\n      <stop offset=\"1\" stop-color=\"#fff\" stop-opacity=\"0\" />\n    </linearGradient>\n  </defs>\n  <rect\n    id=\"slider\"\n    width=\"${opts.width}\"\n    height=\"${opts.height-1}\"\n    y=\"0\"\n    rx=\"5\"\n    ry=\"${opts.height/3+1}\"\n  />\n  <circle\n    id=\"sliderHandler\"\n    r=\"${opts.height/3}\"\n    cx=\"5\"\n    cy=\"${opts.height/3+1}\"\n    fill=\"none\"\n    stroke=\"#fff\"\n    stroke-width=\"2\"\n  />\n</svg>`\n}\n\n/**\n * @type { {\n * render: (opts: { rotation: string | number }) => string\n * getHtml: (opts?: { [key: string]: any }) => string\n * getCss: (opts: { rotation: string | number }) => string\n * } }\n */\nconst Template = {\n  render(opts) {\n    return `<style>${this.getCss(opts)}</style>${this.getHtml(opts)}`\n  },\n  getHtml,\n  getCss,\n};\n\nexport { Template };\n","import { Template } from \"./template.js\"\n\ntype Hsb = { h: number; s: number; b: number }\ntype Rgb = { r: number; g: number; b: number }\ntype State = {\n  sb: { s: number; b: number }\n  hsb: { h: number; s: number; b: number }\n  rgb: { r: number; g: number; b: number }\n  hex: string\n}\ntype Pickers = {\n  hue: {\n    slider: HTMLElement\n    handler: HTMLElement\n  }\n}\ntype Values = Record<number, number[]>\nclass ColorSlider extends HTMLElement {\n  private root = this.attachShadow({ mode: \"open\" })!\n  private pickers: Pickers = {} as Pickers\n  state: State = {\n    sb: { s: 30, b: 95 },\n    hsb: { h: 0, s: 30, b: 95 },\n    rgb: { r: 255, g: 255, b: 255 },\n    hex: \"#FFFFFF\",\n  }\n  private opts = { rotation: 0, marginTop: \"0\", width: 200, height: 12 }\n  private connected = false\n  constructor() {\n    super()\n    const onDrag = (callback: (e: MouseEvent) => void) => {\n      this.addEventListener(\"mousemove\", callback)\n      document.addEventListener(\n        \"mouseup\",\n        () => this.removeEventListener(\"mousemove\", callback),\n        { once: true }\n      )\n    }\n    this.root.addEventListener(\"mousedown\", event => {\n      if (\n        event.target == this.pickers.hue.slider ||\n        event.target == this.pickers.hue.handler\n      ) {\n        this.pickHue(\n          this.getAttribute(\"vertical\") !== null,\n          event as MouseEvent\n        )\n        onDrag(this.pickHue.bind(this, this.getAttribute(\"vertical\") !== null))\n      }\n    })\n  }\n\n  get hex(): string {\n    return \"#\" + this.state.hex\n  }\n\n  pickHue(isVertical: boolean, event: MouseEvent) {\n    const { x, y, width, height } = getPickCoordinates(\n      event,\n      this.pickers.hue.slider\n    )\n    this.updateState(\n      {\n        ...this.state.sb,\n        h: Math.round(isVertical ? calcH(y, height) : calcH(x, width)),\n      },\n      isVertical\n    )\n    event.preventDefault()\n  }\n\n  updateState(obj: Hsb | Rgb | string, isVertical?: boolean): State {\n    if (typeof obj === \"object\" && \"h\" in obj) {\n      // make extreme colors on extreme points on the slider\n      if (obj.h > 353) return this.updateState({ r: 84, g: 56, b: 58 })\n      if (obj.h < 7) return this.updateState(\"#FFFFFF\")\n      this.state.hsb = { ...this.state.hsb, ...obj }\n      this.state.rgb = toRGB(this.state.hsb)\n      this.state.hex = toHex(this.state.rgb)\n    } else if (typeof obj === \"object\" && \"r\" in obj) {\n      this.state.hsb = toHSB(obj)\n      this.state.hex = toHex(this.state.rgb)\n      this.state.rgb = obj\n    } else if (typeof obj === \"string\") {\n      this.state.hsb = toHSB(obj)\n      this.state.rgb = toRGB(this.state.hsb)\n      this.state.hex = obj\n    } else {\n      console.error(\"wrong data for updateState\")\n    }\n    this.state.hex = toHex(this.state.rgb)\n    this.updateSvgAttributes(this.state, isVertical)\n    this.setAttribute(\"hex\", \"#\" + this.state.hex)\n    this.dispatchEvent(\n      new CustomEvent(\"colorChange\", {\n        bubbles: true,\n        composed: true,\n        detail: { hex: \"#\" + this.state.hex },\n      })\n    )\n    return this.state\n  }\n  updateSvgAttributes({ hsb, hex }: State, isVertical?: boolean) {\n    const coords = getHandlerCoordinates(this.pickers.hue, hsb, isVertical)\n    // ;(Object.keys(coords) as (keyof typeof coords)[]).forEach(axis =>\n    // this.pickers.hue.handler.setAttribute(`c${axis}`, coords[axis].toString())\n    // )\n    Object.keys(coords).forEach(axis =>\n      this.pickers.hue.handler.setAttribute(\n        `c${axis}`,\n        coords[axis as keyof typeof coords].toString()\n      )\n    )\n  }\n  render() {\n    this.root.innerHTML = Template.render(this.opts)\n    this.pickers = {\n      hue: {\n        slider: this.root.getElementById(\"slider\")!,\n        handler: this.root.getElementById(\"sliderHandler\")!,\n      },\n    }\n    buildHueSlider(this.pickers.hue.slider, this.root.querySelector(\"defs\")!)\n  }\n  connectedCallback() {\n    this.render()\n    this.connected = true\n    // setTimeout(() => this.setAttribute(\"hue\", \"300\"), 300)\n  }\n\n  static get observedAttributes() {\n    return [\"vertical\", \"hue\", \"width\", \"height\"]\n  }\n\n  attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ) {\n    if (newValue === oldValue) return\n    switch (name) {\n      case \"vertical\":\n        if (newValue === null) this.opts.rotation = 0\n        else {\n          this.opts.rotation = 90\n          this.opts.marginTop = this.opts.width / 2 + \"px\"\n          if (this.connected) this.render()\n        }\n        break\n      case \"height\":\n        if (newValue === null) this.opts.height = 12\n        else {\n          this.opts.height = parseInt(newValue)\n          if (this.connected) this.render()\n        }\n        break\n      case \"width\":\n        if (newValue === null) this.opts.width = 200\n        else {\n          this.opts.width = parseInt(newValue)\n          if (this.connected) this.render()\n        }\n        break\n      case \"hue\":\n        const hue = parseInt(newValue || \"\")\n        if (!Number.isInteger(hue) || hue < 0 || hue > 360) return\n        this.updateState(\n          { ...this.state.sb, h: hue },\n          this.getAttribute(\"vertical\") !== null\n        )\n        break\n      default:\n    }\n  }\n\n  static get is() {\n    return \"color-slider\"\n  }\n}\n\nfunction toHSB(color: string | Rgb): Hsb {\n  // RGB\n  if (typeof color === \"object\") {\n    const keys = Object.keys(color)\n    if (!keys.length) return { h: 0, s: 0, b: 0 }\n    const rgb = color\n    const min = Math.min(rgb.r, rgb.g, rgb.b)\n    const max = Math.max(rgb.r, rgb.g, rgb.b)\n    const d = max - min\n    const s = max == 0 ? 0 : d / max\n    const b = max / 255\n    let h\n    switch (max) {\n      case min:\n        h = 0\n        break\n      case rgb.r:\n        h = rgb.g - rgb.b + d * (rgb.g < rgb.b ? 6 : 0)\n        h /= 6 * d\n        break\n      case rgb.g:\n        h = rgb.b - rgb.r + d * 2\n        h /= 6 * d\n        break\n      case rgb.b:\n        h = rgb.r - rgb.g + d * 4\n        h /= 6 * d\n        break\n      default:\n        h = 0\n    }\n    const hsb = {\n      h: Math.round(h * 360),\n      s: Math.round(s * 100),\n      b: Math.round(b * 100),\n    }\n    return hsb\n  } else {\n    // HEX\n    const convert = (color: string) => {\n      const s = color.match(/[\\d\\w]{2}/g)\n      if (s) return s.map((val: string) => parseInt(val, 16))\n      else return { h: 0, s: 0, b: 0 }\n    }\n    const converted = convert(color)\n    if (Array.isArray(converted))\n      return toHSB({ r: converted[0], g: converted[1], b: converted[2] })\n    else return { h: 0, s: 0, b: 0 }\n  }\n}\n\nfunction toHex(rgb: State[\"rgb\"]) {\n  return Object.keys(rgb)\n    .reduce((str, key) => {\n      let hex = rgb[key as keyof typeof rgb].toString(16)\n      if (hex.length < 2) hex = `0${hex}`\n      return str + hex\n    }, \"\")\n    .toUpperCase()\n}\n\nfunction toRGB(hsb: State[\"hsb\"]) {\n  const h = Number(hsb.h) / 360\n  const i = Math.floor(h * 6)\n  const values: Values = (() => {\n    const [s, b] = [hsb.s, hsb.b].map(val => Number(val) / 100)\n    const f = h * 6 - i\n    const p = b * (1 - s)\n    const q = b * (1 - f * s)\n    const t = b * (1 - (1 - f) * s)\n\n    return {\n      0: [b, t, p],\n      1: [q, b, p],\n      2: [p, b, t],\n      3: [p, q, b],\n      4: [t, p, b],\n      5: [b, p, q],\n    }\n  })()\n\n  const [r, g, b] = values[i % 6].map((value: number) =>\n    Math.round(value * 255)\n  )\n  return { r, g, b }\n}\n\nfunction getHandlerCoordinates(\n  picker: Pickers[\"hue\"],\n  color: State[\"hsb\"],\n  isVertical?: boolean\n) {\n  const rect = picker.slider.getBoundingClientRect()\n  let x = isVertical\n    ? (color.h / 360) * rect.height\n    : (color.h / 360) * rect.width\n  if (x < 5) x = 5\n  else if (isVertical && x > rect.height - 5) x = rect.height - 5\n  else if (!isVertical && x > rect.width - 5) x = rect.width - 5\n  return { x }\n}\n\nfunction getPickCoordinates(event: MouseEvent, el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  const { width, height } = rect\n  const x = event.clientX - rect.left\n  const y = event.clientY - rect.top\n  return { width, height, x, y }\n}\n\nfunction calcH(x: number, width: number) {\n  if (x > width) return 360\n  if (x < 0) return 0\n  return (x / width) * 360\n}\n\n// function calcS(x: number, width: number) {\n// if (x > width) return 100\n// if (x < 0) return 0\n// return (x / width) * 100\n// }\n\n// function calcB(y: number, height: number) {\n// if (y > height) return 0\n// if (y < 0) return 100\n// return (1 - y / height) * 100\n// }\n\n// hue slider gradient\n// ===============================================================================================\n\nfunction create(\n  el: string,\n  attr: { \"stop-color\"?: string; offset?: string; id?: string }\n) {\n  return Object.keys(attr).reduce((layer, key) => {\n    layer.setAttribute(key, attr[key as keyof typeof attr]!.toString())\n    return layer\n  }, document.createElementNS(\"http://www.w3.org/2000/svg\", el))\n}\n\nfunction defineColorStops(\n  steps = 20,\n  arr: { \"stop-color\": string; offset: string }[] = [],\n  hue = 0,\n  max = 360\n): { \"stop-color\": string; offset: string }[] {\n  arr.push({\n    \"stop-color\": `hsl(${hue}, 100%, 50%)`,\n    offset: (hue / max).toFixed(2),\n  })\n  return hue >= max ? arr : defineColorStops(steps, arr, hue + max / steps)\n}\n\nfunction buildHueSlider(hue: HTMLElement, defs: SVGDefsElement) {\n  const gradientId = \"sliderGradient\"\n  const gradient = create(\"linearGradient\", {\n    id: gradientId,\n  })\n\n  defineColorStops().forEach(color =>\n    gradient.appendChild(create(\"stop\", color))\n  )\n  defs.appendChild(gradient)\n  hue.setAttribute(\"fill\", `url(#${gradientId})`)\n}\n\ncustomElements.define(ColorSlider.is, ColorSlider)\n\nexport { ColorSlider }\n"],"names":[],"mappings":"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"}